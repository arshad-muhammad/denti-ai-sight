{
  "rules": {
    "cases": {
      "$userId": {
     
        ".read": "$userId === auth.uid",
        ".write": "$userId === auth.uid",
        "$caseId": {
       
          ".validate": "newData.hasChildren(['patientName', 'createdAt', 'status'])",
          "analysis": {
           
            ".validate": "newData.hasChildren(['diagnosis', 'confidence', 'findings', 'recommendations', 'timestamp'])",
            "findings": {
              ".validate": "newData.hasChildren(['boneLoss', 'caries', 'pathologies'])"
            }
          }
        }
      }
    },
    "temp": {
      // Temporary storage for processing
      "$userId": {
        ".read": "$userId === auth.uid",
        ".write": "$userId === auth.uid",
        // Auto-delete after 1 hour
        ".validate": "newData.child('timestamp').val() > (now - 3600000)"
      }
    }
  }
} 